{"ast":null,"code":"import _regeneratorRuntime from\"/Users/denizyuksel/Desktop/prosmarttravel/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/denizyuksel/Desktop/prosmarttravel/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/denizyuksel/Desktop/prosmarttravel/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/denizyuksel/Desktop/prosmarttravel/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/denizyuksel/Desktop/prosmarttravel/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext}from\"react\";import{Form,FormGroup,Button}from\"reactstrap\";import{useNavigate}from\"react-router-dom\";import{AuthContext}from\"../../context/AuthContext\";import\"./transferBooking.css\";import{BASE_URL}from\"../../utils/config\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TransferBooking=function TransferBooking(_ref){var transfer=_ref.transfer;var price=transfer.price;var navigate=useNavigate();var _useContext=useContext(AuthContext),user=_useContext.user;var _useState=useState({userId:user?user._id:null,userEmail:user?user.email:\"\",transferFrom:transfer.origin,transferTo:transfer.destination,flightNumber:\"\",fullName:\"\",address:\"\",// New field for drop-off address\nphone:\"\",passengerNames:\"\",transferDate:\"\",transferTime:\"\",note:\"\"}),_useState2=_slicedToArray(_useState,2),booking=_useState2[0],setBooking=_useState2[1];var handleSwap=function handleSwap(){setBooking(function(prevBooking){return _objectSpread(_objectSpread({},prevBooking),{},{transferFrom:prevBooking.transferTo,transferTo:prevBooking.transferFrom});});};var handleChange=function handleChange(e){setBooking(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},e.target.id,e.target.value));});};var handleClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var res,result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return fetch(\"\".concat(BASE_URL,\"/transfer-booking\"),{method:\"post\",headers:{\"content-type\":\"application/json\"},credentials:\"include\",body:JSON.stringify(booking)});case 4:res=_context.sent;_context.next=7;return res.json();case 7:result=_context.sent;if(res.ok){_context.next=10;break;}return _context.abrupt(\"return\",alert(result.message));case 10:navigate(\"/thank-you\");_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](1);alert(_context.t0.message);case 16:case\"end\":return _context.stop();}},_callee,null,[[1,13]]);}));return function handleClick(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"booking\",children:[/*#__PURE__*/_jsxs(Form,{onSubmit:handleClick,className:\"booking__form\",children:[/*#__PURE__*/_jsxs(FormGroup,{className:\"booking__info-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"fullName\",placeholder:\"Name Surname\",required:true,id:\"fullName\",onChange:handleChange,className:\"booking__form-input\"}),!user&&/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"userEmail\",placeholder:\"Enter your email\",value:booking.userEmail,onChange:handleChange,required:true,className:\"booking__form-input\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"phone\",placeholder:\"Phone\",required:true,value:booking.phone,onChange:handleChange,className:\"booking__form-input\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"passengerNames\",placeholder:\"Passengers Names\",value:booking.passengerNames,required:true,onChange:handleChange,className:\"booking__form-input\"})]}),/*#__PURE__*/_jsxs(FormGroup,{className:\"booking__info-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"transfer-info\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"transfer-info__text\",children:[\"Transfer From: \",booking.transferFrom]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn swap-btn\",onClick:handleSwap,children:\"Swap\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"transfer-info__text\",children:[\"Transfer To: \",booking.transferTo]})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"address\",placeholder:\"Exact Address for Pick-Up or Drop-Off\",value:booking.address,onChange:handleChange,required:true,className:\"booking__form-input\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"flightNumber\",placeholder:\"Flight number\",value:booking.flightNumber,required:true,onChange:handleChange,className:\"booking__form-input\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",id:\"transferDate\",required:true,value:booking.transferDate,onChange:handleChange,className:\"booking__form-input\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",id:\"transferTime\",required:true,value:booking.transferTime,onChange:handleChange,className:\"booking__form-input\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"note\",placeholder:\"Note\",onChange:handleChange,value:booking.note,className:\"booking__form-input\"})]})]}),/*#__PURE__*/_jsxs(Button,{onClick:handleClick,className:\"btn primary__btn\",children:[\"Book Now - $\",price]})]});};export default TransferBooking;","map":{"version":3,"names":["React","useState","useContext","Form","FormGroup","Button","useNavigate","AuthContext","BASE_URL","TransferBooking","transfer","price","navigate","user","userId","_id","userEmail","email","transferFrom","origin","transferTo","destination","flightNumber","fullName","address","phone","passengerNames","transferDate","transferTime","note","booking","setBooking","handleSwap","prevBooking","handleChange","e","prev","target","id","value","handleClick","preventDefault","fetch","method","headers","credentials","body","JSON","stringify","res","json","result","ok","alert","message"],"sources":["/Users/denizyuksel/Desktop/prosmarttravel/frontend/src/components/Booking/TransferBooking.jsx"],"sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { Form, FormGroup, Button } from \"reactstrap\";\nimport { useNavigate } from \"react-router-dom\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport \"./transferBooking.css\";\nimport { BASE_URL } from \"../../utils/config\";\n\nconst TransferBooking = ({ transfer }) => {\n  const { price } = transfer;\n  const navigate = useNavigate();\n  const { user } = useContext(AuthContext);\n\n  const [booking, setBooking] = useState({\n    userId: user ? user._id : null,\n    userEmail: user ? user.email : \"\",\n    transferFrom: transfer.origin,\n    transferTo: transfer.destination,\n    flightNumber: \"\",\n    fullName: \"\",\n    address: \"\", // New field for drop-off address\n    phone: \"\",\n    passengerNames: \"\",\n    transferDate: \"\",\n    transferTime: \"\",\n    note: \"\",\n  });\n\n  const handleSwap = () => {\n    setBooking((prevBooking) => ({\n      ...prevBooking,\n      transferFrom: prevBooking.transferTo,\n      transferTo: prevBooking.transferFrom,\n    }));\n  };\n  const handleChange = (e) => {\n    setBooking((prev) => ({ ...prev, [e.target.id]: e.target.value }));\n  };\n\n  const handleClick = async (e) => {\n    e.preventDefault();\n\n    try {\n      const res = await fetch(`${BASE_URL}/transfer-booking`, {\n        method: \"post\",\n        headers: { \"content-type\": \"application/json\" },\n        credentials: \"include\",\n        body: JSON.stringify(booking),\n      });\n      const result = await res.json();\n      if (!res.ok) {\n        return alert(result.message);\n      }\n      navigate(\"/thank-you\");\n    } catch (error) {\n      alert(error.message);\n    }\n  };\n\n  return (\n    <div className=\"booking\">\n      <Form onSubmit={handleClick} className=\"booking__form\">\n        {/* Personal Information Fields */}\n        <FormGroup className=\"booking__info-form\">\n          <input\n            type=\"text\"\n            name=\"fullName\"\n            placeholder=\"Name Surname\"\n            required\n            id=\"fullName\"\n            onChange={handleChange}\n            className=\"booking__form-input\"\n          />\n          {!user && (\n            <input\n              type=\"email\"\n              id=\"userEmail\"\n              placeholder=\"Enter your email\"\n              value={booking.userEmail}\n              onChange={handleChange}\n              required\n              className=\"booking__form-input\"\n            />\n          )}\n          <input\n            type=\"text\"\n            id=\"phone\"\n            placeholder=\"Phone\"\n            required\n            value={booking.phone}\n            onChange={handleChange}\n            className=\"booking__form-input\"\n          />\n          <input\n            type=\"text\"\n            id=\"passengerNames\"\n            placeholder=\"Passengers Names\"\n            value={booking.passengerNames}\n            required\n            onChange={handleChange}\n            className=\"booking__form-input\"\n          />\n        </FormGroup>\n\n        {/* Transfer Information Fields */}\n        <FormGroup className=\"booking__info-form\">\n          <div className=\"transfer-info\">\n            <p className=\"transfer-info__text\">\n              Transfer From: {booking.transferFrom}\n            </p>\n            <button className=\"btn swap-btn\" onClick={handleSwap}>\n              Swap\n            </button>\n            <p className=\"transfer-info__text\">\n              Transfer To: {booking.transferTo}\n            </p>\n          </div>\n          <input\n            type=\"text\"\n            id=\"address\"\n            placeholder=\"Exact Address for Pick-Up or Drop-Off\"\n            value={booking.address}\n            onChange={handleChange}\n            required\n            className=\"booking__form-input\"\n          />\n          <input\n            type=\"text\"\n            id=\"flightNumber\"\n            placeholder=\"Flight number\"\n            value={booking.flightNumber}\n            required\n            onChange={handleChange}\n            className=\"booking__form-input\"\n          />\n          <input\n            type=\"date\"\n            id=\"transferDate\"\n            required\n            value={booking.transferDate}\n            onChange={handleChange}\n            className=\"booking__form-input\"\n          />\n          <input\n            type=\"time\"\n            id=\"transferTime\"\n            required\n            value={booking.transferTime}\n            onChange={handleChange}\n            className=\"booking__form-input\"\n          />\n          <textarea\n            id=\"note\"\n            placeholder=\"Note\"\n            onChange={handleChange}\n            value={booking.note}\n            className=\"booking__form-input\"\n          />\n        </FormGroup>\n      </Form>\n      <Button onClick={handleClick} className=\"btn primary__btn\">\n        Book Now - ${price}\n      </Button>\n    </div>\n  );\n};\n\nexport default TransferBooking;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}